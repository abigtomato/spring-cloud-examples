# sentinel流控规则
* 阈值类型
    * QPS：每秒钟的请求数量
    * 线程数
* 流控模式
    * 直接：API达到某一阈值时，直接限制调用
    * 关联：指定关联的资源，若对方达到某一阈值，对自己进行限制
    * 链路：只记录指定链路上的流量（指定资源从入口资源进来的流量，若达到阈值则限流）
* 流控效果
    * 快速失败：直接失败，抛出异常
    * 预热：根据codeFactor（冷加载因子，默认3）的值，计算出预热的时间窗口（阈值/codeFactor），当预热时间窗口结束，则进入设定的阈值时间窗口
    * 排队等待：排队处理请求，让请求匀速通过，阈值的类型必须设置为QPS

# sentinel降级规则
* sentinel熔断机制会在调用链路中某个资源出现不稳定状态时，对该资源的调用进行降级，让请求快速失败，避免影响其它资源导致级联错误
* 当资源被降级后，在接下来的时间窗口内，所有对该资源的调用都自动熔断
* sentinel的断路器和hystrix不同，不存在半开状态，只有当时间窗口结束，才会关闭断路器
* 降级策略
    * RT：平均响应时间（秒级），超出阈值且在时间窗口内通过的请求数 >= 5，两个条件同时满足后触发降级；时间窗口结束后，关闭断路器
    * 异常比例：QPS >= 5，且异常比例（秒级统计）超过阈值时触发降级；时间窗口结束后，关闭断路器
    * 异常数：异常数（分钟级）超过阈值时触发降级；时间窗口结束后，关闭断路器

# sentinel热点规则